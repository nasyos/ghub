# メッセージ管理画面レイアウト修正チェックリスト

## 修正内容

### ✅ 1. 3分割グリッドレイアウトの実装
- [x] 右側ペインに `grid grid-rows-[auto,1fr,auto]` を適用
- [x] ヘッダー（求職者情報）: `auto` - 固定高さ
- [x] メッセージスレッド: `1fr` - 残りのスペースを占有
- [x] 送信欄: `auto` - 固定高さ

### ✅ 2. 左側スレッド一覧の独立スクロール
- [x] タブナビゲーション: `flex-shrink-0` - 固定
- [x] ページ選択: `flex-shrink-0` - 固定（条件付き、プレースホルダーで高さ確保）
- [x] 検索・フィルタ: `flex-shrink-0` - 固定
- [x] スレッドリスト: `flex-1 overflow-y-auto min-h-0` - スクロール可能

### ✅ 3. 右側メッセージエリアの独立スクロール
- [x] 求職者情報ヘッダー: `flex-shrink-0` - 固定
- [x] メッセージスレッド: `flex-1 overflow-y-auto min-h-0` - スクロール可能
- [x] 送信欄: `flex-shrink-0` - 固定

### ✅ 4. レスポンシブ対応
- [x] モバイル（768px未満）: `grid-cols-[1fr]` - 1列レイアウト
- [x] デスクトップ（768px以上）: `grid-cols-[320px_1fr]` - 2列レイアウト

## デグレテスト項目

### ✅ 1. 求職者情報ヘッダーの表示確認
- [x] 右側メッセージ欄上部に求職者情報が表示される
- [x] 求職者名、国籍、性別、年齢、希望職種が表示される
- [x] 送信ステータス、担当CA、同意状況のバッジが表示される
- [x] 翻訳ボタンが表示される

### ✅ 2. メッセージ送信欄の常時表示確認
- [x] 送信欄が画面下部に固定表示される
- [x] スクロールしても送信欄が隠れない
- [x] テンプレ、タグ送信、同意リクエスト、添付ボタンが表示される
- [x] メッセージ入力欄とSendボタンが表示される

### ✅ 3. メッセージスレッドのスクロール確認
- [x] メッセージスレッドが独立してスクロール可能
- [x] 過去のメッセージが切れずに表示される
- [x] メッセージバブルが正しく表示される
- [x] タイムスタンプが表示される

### ✅ 4. スレッド一覧のスクロール確認
- [x] スレッド一覧が独立してスクロール可能
- [x] 検索・フィルタが固定表示される
- [x] スレッド情報が正しく表示される

### ✅ 5. レイアウトの安定性確認
- [x] 画面サイズ変更時にレイアウトが崩れない
- [x] メッセージ送信時にレイアウトが崩れない
- [x] スレッド選択時にレイアウトが崩れない

## 技術的実装詳細

### Flexbox レイアウト
```css
/* 右側ペインの3分割Flexbox */
.right-pane {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 左側ペインの4分割Flexbox */
.left-pane {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
```

### スクロール制御
```css
/* 独立スクロールエリア */
.thread-list {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}

.message-thread {
  overflow-y: auto;
  min-height: 0;
}
```

### 固定要素
```css
/* 固定表示要素 */
.header, .composer, .search-filters {
  flex-shrink: 0;
}
```

## 期待される動作

1. **求職者情報ヘッダー**: 常に表示され、スクロールしても隠れない
2. **メッセージスレッド**: 独立してスクロール可能、過去メッセージも表示
3. **送信欄**: 常に画面下部に表示、スクロールしても隠れない
4. **スレッド一覧**: 独立してスクロール可能、検索・フィルタは固定
5. **レスポンシブ**: 画面サイズに応じて適切にレイアウト変更

## テスト実行方法

```bash
# テストの実行
npm test components/messages.test.tsx

# 手動テスト
# 1. ブラウザで localhost:3000/messages にアクセス
# 2. スレッドを選択して求職者情報ヘッダーが表示されることを確認
# 3. メッセージをスクロールして送信欄が隠れないことを確認
# 4. スレッド一覧をスクロールして検索・フィルタが固定されることを確認
# 5. 画面サイズを変更してレイアウトが崩れないことを確認
```
